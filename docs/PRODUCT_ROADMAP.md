# Twitter Enhanced 产品需求规划

> 最后更新：2026-01-21
> 版本：v1.0

## 目录

- [一、产品愿景](#一产品愿景)
- [二、版本规划概览](#二版本规划概览)
- [三、Phase 1: 媒体下载增强](#三phase-1-媒体下载增强)
- [四、Phase 2: 书签管理](#四phase-2-书签管理)
- [五、Phase 3: 内容过滤与屏蔽](#五phase-3-内容过滤与屏蔽)
- [六、Phase 4: 阅读体验优化](#六phase-4-阅读体验优化)
- [七、Phase 5: 用户备注增强](#七phase-5-用户备注增强)
- [八、技术债务与优化](#八技术债务与优化)
- [九、附录](#九附录)

---

## 一、产品愿景

### 1.1 产品定位

Twitter Enhanced 是一款 Chrome 扩展，旨在解决 Twitter/X 用户的核心痛点，提供更好的内容管理、媒体下载和阅读体验。

### 1.2 核心价值主张

| 价值 | 描述 |
|------|------|
| **内容所有权** | 让用户真正拥有自己喜欢的内容（下载、导出、备份） |
| **个性化体验** | 通过过滤、备注等功能打造个人专属的 Twitter 体验 |
| **效率提升** | 减少干扰，简化操作，提升信息获取效率 |

### 1.3 目标用户

- 重度 Twitter 用户（日均使用 1 小时以上）
- 内容创作者和研究人员
- 需要管理大量关注和书签的用户
- 对隐私和数据所有权有要求的用户

### 1.4 当前功能基线

| 功能 | 状态 | 描述 |
|------|------|------|
| 用户备注 | ✅ 已实现 | 给 Twitter 用户添加个人备注 |
| 视频下载 | ✅ 已实现 | 一键下载 Twitter 视频 |
| 多视频选择 | ✅ 已实现 | 从推文选择多个视频下载 |
| 下载记录 | ✅ 已实现 | 查看和管理下载历史 |

---

## 二、版本规划概览

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           版本发布路线图                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  v1.x (当前)          v2.0                v2.1              v2.2        │
│  ─────────────────────────────────────────────────────────────────────  │
│  [用户备注]     →   [图片下载]      →   [书签管理]    →   [内容过滤]     │
│  [视频下载]     →   [GIF下载]       →   [书签导出]    →   [广告屏蔽]     │
│  [下载记录]     →   [批量下载]      →   [书签搜索]    →   [关键词静音]   │
│                                                                         │
│                              v3.0              v3.1                      │
│                         ─────────────────────────────────               │
│                          [Thread阅读]    →   [备注增强]                  │
│                          [自动翻译]      →   [数据同步]                  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 版本优先级矩阵

| 版本 | 主题 | 优先级 | 用户价值 | 技术复杂度 |
|------|------|--------|----------|------------|
| v2.0 | 媒体下载增强 | P0 | ⭐⭐⭐⭐⭐ | 低 |
| v2.1 | 书签管理 | P0 | ⭐⭐⭐⭐⭐ | 中 |
| v2.2 | 内容过滤 | P1 | ⭐⭐⭐⭐ | 中 |
| v3.0 | 阅读优化 | P1 | ⭐⭐⭐⭐ | 高 |
| v3.1 | 备注增强 | P2 | ⭐⭐⭐ | 低 |

---

## 三、Phase 1: 媒体下载增强

### 3.1 功能概述

扩展现有的视频下载功能，支持图片和 GIF 下载，提供完整的媒体下载解决方案。

### 3.2 功能需求

#### F1.1 图片下载

| 字段 | 内容 |
|------|------|
| **功能 ID** | F1.1 |
| **功能名称** | 图片下载 |
| **优先级** | P0 |
| **用户故事** | 作为一个 Twitter 用户，我希望能够一键下载推文中的图片，以便保存喜欢的内容 |

**功能描述：**

1. 在包含图片的推文上显示下载按钮
2. 单图推文：点击直接下载原图
3. 多图推文：显示图片选择界面，支持：
   - 单选下载
   - 多选下载
   - 全选下载
4. 下载原图质量（`:orig` 后缀）

**UI/UX 要求：**

- 下载按钮与现有视频下载按钮风格一致
- 多图选择界面与现有多视频选择界面风格一致
- 显示图片预览缩略图
- 显示图片分辨率信息

**技术要点：**

- 解析推文中的图片 URL
- 处理 Twitter 图片 URL 格式（添加 `:orig` 获取原图）
- 支持的格式：JPG、PNG、WEBP

**验收标准：**

- [ ] 单图推文可以一键下载
- [ ] 多图推文可以选择性下载
- [ ] 下载的是原图质量
- [ ] 文件名包含推文 ID 和序号
- [ ] 下载记录正确保存到 IndexedDB

---

#### F1.2 GIF 下载

| 字段 | 内容 |
|------|------|
| **功能 ID** | F1.2 |
| **功能名称** | GIF 下载 |
| **优先级** | P0 |
| **用户故事** | 作为一个 Twitter 用户，我希望能够下载推文中的 GIF 动图 |

**功能描述：**

1. 识别推文中的 GIF 内容
2. 提供下载选项：
   - 下载为 MP4（Twitter 原始格式）
   - 下载为 GIF（可选，需转换）
3. GIF 转换功能（可选实现）

**技术要点：**

- Twitter 将 GIF 存储为 MP4 格式
- GIF 转换需要使用 canvas 或 WebAssembly (如 ffmpeg.wasm)
- 考虑文件大小和转换时间的权衡

**验收标准：**

- [ ] 可以下载 GIF 的 MP4 原始格式
- [ ] 文件名标识为 GIF 来源
- [ ] 下载记录正确保存

---

#### F1.3 批量下载

| 字段 | 内容 |
|------|------|
| **功能 ID** | F1.3 |
| **功能名称** | 批量媒体下载 |
| **优先级** | P1 |
| **用户故事** | 作为一个 Twitter 用户，我希望能够批量下载某条推文中的所有媒体文件 |

**功能描述：**

1. "下载全部媒体"按钮
2. 自动识别推文中的所有媒体（视频、图片、GIF）
3. 打包下载或逐个下载
4. 显示下载进度

**验收标准：**

- [ ] 一键下载推文中所有媒体
- [ ] 正确处理混合媒体类型
- [ ] 显示下载进度和状态

---

#### F1.4 下载记录增强

| 字段 | 内容 |
|------|------|
| **功能 ID** | F1.4 |
| **功能名称** | 下载记录增强 |
| **优先级** | P1 |
| **用户故事** | 作为一个用户，我希望能够更好地管理和查看我的下载历史 |

**功能描述：**

1. 按媒体类型筛选（视频/图片/GIF）
2. 按日期范围筛选
3. 搜索功能（按推文内容或用户名）
4. 导出下载记录

**验收标准：**

- [ ] 支持按类型筛选
- [ ] 支持按日期筛选
- [ ] 支持关键词搜索
- [ ] 可以导出为 JSON/CSV

---

### 3.3 数据模型变更

```typescript
// 扩展 DownloadRecord 类型
interface DownloadRecord {
  id: string;
  tweetId: string;
  mediaType: 'video' | 'image' | 'gif';  // 新增字段
  mediaUrl: string;
  thumbnailUrl?: string;  // 新增字段
  resolution?: string;    // 新增字段 (如 "1920x1080")
  fileSize?: number;      // 新增字段 (字节)
  downloadDate: Date;
  tweetAuthor?: string;   // 新增字段
  tweetContent?: string;  // 新增字段 (前100字符)
}
```

### 3.4 UI 设计要点

```
┌─────────────────────────────────────────┐
│ 推文内容区域                              │
├─────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐               │
│  │  图片1   │  │  图片2   │               │
│  │         │  │         │               │
│  └─────────┘  └─────────┘               │
│  ┌─────────┐  ┌─────────┐               │
│  │  图片3   │  │  图片4   │               │
│  │         │  │         │               │
│  └─────────┘  └─────────┘               │
├─────────────────────────────────────────┤
│ [♡] [🔁] [💬] [📤]  [⬇️ 下载图片]        │
└─────────────────────────────────────────┘

点击"下载图片"后弹出选择界面：
┌─────────────────────────────────────────┐
│ 选择要下载的图片              [全选] [×] │
├─────────────────────────────────────────┤
│  ☑️ ┌─────┐  ☑️ ┌─────┐                  │
│     │ 1   │     │ 2   │                  │
│     └─────┘     └─────┘                  │
│    1920×1080   1280×720                  │
│                                          │
│  ☐ ┌─────┐  ☐ ┌─────┐                   │
│     │ 3   │     │ 4   │                  │
│     └─────┘     └─────┘                  │
│    1920×1080   1920×1080                 │
├─────────────────────────────────────────┤
│           [下载选中的 2 张图片]           │
└─────────────────────────────────────────┘
```

---

## 四、Phase 2: 书签管理

### 4.1 功能概述

提供完整的书签管理解决方案，解决 Twitter 原生书签功能的不足。

### 4.2 功能需求

#### F2.1 书签本地同步

| 字段 | 内容 |
|------|------|
| **功能 ID** | F2.1 |
| **功能名称** | 书签本地同步 |
| **优先级** | P0 |
| **用户故事** | 作为一个用户，我希望能够将我的 Twitter 书签同步到本地，以便离线查看和管理 |

**功能描述：**

1. 获取用户的 Twitter 书签列表
2. 存储到本地 IndexedDB
3. 增量同步（只获取新书签）
4. 显示同步状态和进度

**技术要点：**

- 使用 Twitter GraphQL API 获取书签
- 需要用户 Cookie 授权
- 处理 API 速率限制
- 分页获取大量书签

**验收标准：**

- [ ] 可以获取用户的全部书签
- [ ] 书签数据正确存储到本地
- [ ] 支持增量同步
- [ ] 处理 API 错误和速率限制

---

#### F2.2 书签分类管理

| 字段 | 内容 |
|------|------|
| **功能 ID** | F2.2 |
| **功能名称** | 书签分类管理 |
| **优先级** | P0 |
| **用户故事** | 作为一个用户，我希望能够给书签添加分类和标签，以便更好地组织内容 |

**功能描述：**

1. 创建自定义分类（文件夹）
2. 给书签添加标签
3. 将书签移动到分类
4. 按分类/标签查看书签
5. 支持多级分类（可选）

**数据模型：**

```typescript
interface BookmarkFolder {
  id: string;
  name: string;
  parentId?: string;  // 支持多级分类
  color?: string;
  createdAt: Date;
  updatedAt: Date;
}

interface BookmarkTag {
  id: string;
  name: string;
  color?: string;
}

interface Bookmark {
  id: string;
  tweetId: string;
  tweetContent: string;
  tweetAuthor: string;
  authorAvatar: string;
  mediaUrls?: string[];
  folderId?: string;
  tagIds: string[];
  note?: string;        // 用户备注
  createdAt: Date;      // Twitter 书签时间
  syncedAt: Date;       // 本地同步时间
}
```

**验收标准：**

- [ ] 可以创建/编辑/删除分类
- [ ] 可以给书签添加/移除标签
- [ ] 可以将书签移动到分类
- [ ] 分类和标签数据持久化保存

---

#### F2.3 书签搜索

| 字段 | 内容 |
|------|------|
| **功能 ID** | F2.3 |
| **功能名称** | 书签搜索 |
| **优先级** | P0 |
| **用户故事** | 作为一个用户，我希望能够搜索我的书签，快速找到需要的内容 |

**功能描述：**

1. 全文搜索书签内容
2. 按作者搜索
3. 按分类/标签筛选
4. 按日期范围筛选
5. 高级搜索组合条件

**验收标准：**

- [ ] 支持关键词搜索
- [ ] 支持多条件组合筛选
- [ ] 搜索结果高亮显示
- [ ] 搜索性能良好（1000+ 书签情况下）

---

#### F2.4 书签导出

| 字段 | 内容 |
|------|------|
| **功能 ID** | F2.4 |
| **功能名称** | 书签导出 |
| **优先级** | P1 |
| **用户故事** | 作为一个用户，我希望能够导出我的书签，用于备份或在其他应用中使用 |

**功能描述：**

1. 导出格式支持：
   - JSON（完整数据）
   - CSV（表格格式）
   - Markdown（可读格式）
   - HTML（带链接）
2. 选择性导出（按分类/标签/日期）
3. 包含/排除媒体 URL

**导出格式示例：**

```markdown
# Twitter 书签导出

## 分类：技术文章

### @elikikaiser - 2024-01-15
> 这是一条关于 React 性能优化的推文...

链接：https://twitter.com/elikikaiser/status/123456789

标签：#React #性能优化

---
```

**验收标准：**

- [ ] 支持至少 3 种导出格式
- [ ] 可以选择导出范围
- [ ] 导出文件格式正确可用
- [ ] 大量书签导出性能可接受

---

### 4.3 UI 设计要点

```
书签管理页面布局：

┌──────────────────────────────────────────────────────────────────┐
│ 📑 书签管理                                    [同步] [导出] [设置] │
├────────────────┬─────────────────────────────────────────────────┤
│                │ 🔍 搜索书签...              [分类▾] [标签▾] [日期▾] │
│  📁 全部 (128) │─────────────────────────────────────────────────│
│                │                                                 │
│  📁 技术 (45)  │ ┌─────────────────────────────────────────────┐ │
│    └ 前端 (20)│ │ @user1 · 2024-01-15                    [⋮] │ │
│    └ 后端 (25)│ │ 推文内容预览...                              │ │
│                │ │ [标签1] [标签2]           📁技术 / 前端      │ │
│  📁 设计 (30)  │ └─────────────────────────────────────────────┘ │
│                │                                                 │
│  📁 灵感 (53)  │ ┌─────────────────────────────────────────────┐ │
│                │ │ @user2 · 2024-01-14                    [⋮] │ │
│  ───────────  │ │ 另一条推文内容...                            │ │
│  🏷️ 标签管理   │ │ [标签3]                        📁设计       │ │
│                │ └─────────────────────────────────────────────┘ │
│                │                                                 │
└────────────────┴─────────────────────────────────────────────────┘
```

---

## 五、Phase 3: 内容过滤与屏蔽

### 5.1 功能概述

帮助用户过滤不想看到的内容，打造更清净的时间线。

### 5.2 功能需求

#### F3.1 广告屏蔽

| 字段 | 内容 |
|------|------|
| **功能 ID** | F3.1 |
| **功能名称** | 广告屏蔽 |
| **优先级** | P0 |
| **用户故事** | 作为一个用户，我希望能够屏蔽推广推文和广告，获得更清净的浏览体验 |

**功能描述：**

1. 隐藏推广推文（Promoted）
2. 隐藏"升级到 Premium"提示
3. 隐藏"谁可以关注"推荐
4. 隐藏趋势中的推广内容
5. 可选择性开关各类广告

**技术要点：**

- 通过 DOM 选择器识别广告元素
- 使用 MutationObserver 监听动态加载
- 需要持续维护选择器以应对 Twitter 更新

**验收标准：**

- [ ] 推广推文被正确隐藏
- [ ] Premium 提示被隐藏
- [ ] 设置页面可以单独控制各项
- [ ] 不影响正常推文显示

---

#### F3.2 关键词静音

| 字段 | 内容 |
|------|------|
| **功能 ID** | F3.2 |
| **功能名称** | 关键词静音 |
| **优先级** | P0 |
| **用户故事** | 作为一个用户，我希望能够静音特定关键词，避免看到不感兴趣的话题 |

**功能描述：**

1. 添加静音关键词/短语
2. 支持正则表达式（高级）
3. 预设分类快速静音：
   - 政治相关
   - 加密货币
   - 体育赛事
   - AI/科技
   - 自定义分类
4. 静音范围设置（时间线/通知/搜索）
5. 静音时长设置（永久/24小时/7天/30天）

**数据模型：**

```typescript
interface MuteKeyword {
  id: string;
  keyword: string;
  isRegex: boolean;
  scope: ('timeline' | 'notifications' | 'search')[];
  duration: 'permanent' | '24h' | '7d' | '30d';
  category?: string;
  createdAt: Date;
  expiresAt?: Date;
}

interface MutePreset {
  id: string;
  name: string;
  keywords: string[];
  enabled: boolean;
}
```

**验收标准：**

- [ ] 可以添加/删除静音关键词
- [ ] 预设分类可以一键启用/禁用
- [ ] 包含关键词的推文被正确隐藏
- [ ] 静音时长到期自动解除

---

#### F3.3 快速屏蔽/静音按钮

| 字段 | 内容 |
|------|------|
| **功能 ID** | F3.3 |
| **功能名称** | 快速屏蔽/静音按钮 |
| **优先级** | P1 |
| **用户故事** | 作为一个用户，我希望能够一键屏蔽或静音某个用户，减少操作步骤 |

**功能描述：**

1. 在每条推文上添加快速操作按钮
2. 一键屏蔽用户
3. 一键静音用户
4. 支持撤销操作（短时间内）

**验收标准：**

- [ ] 快速按钮正确显示
- [ ] 点击后立即生效
- [ ] 支持 5 秒内撤销
- [ ] 与 Twitter 原生屏蔽/静音同步

---

#### F3.4 屏蔽列表管理

| 字段 | 内容 |
|------|------|
| **功能 ID** | F3.4 |
| **功能名称** | 屏蔽列表管理 |
| **优先级** | P2 |
| **用户故事** | 作为一个用户，我希望能够导入/导出我的屏蔽列表 |

**功能描述：**

1. 查看当前屏蔽/静音列表
2. 批量导入屏蔽列表
3. 导出屏蔽列表
4. 共享屏蔽列表（可选）

**验收标准：**

- [ ] 可以查看完整屏蔽列表
- [ ] 支持导入/导出 JSON 格式
- [ ] 导入时处理重复项

---

### 5.3 UI 设计要点

```
关键词静音设置页面：

┌─────────────────────────────────────────────────────────────────┐
│ 🔇 关键词静音                                                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 添加静音关键词：                                                  │
│ ┌─────────────────────────────────────┐ [永久 ▾] [添加]         │
│ │ 输入关键词或短语...                   │                        │
│ └─────────────────────────────────────┘                         │
│ ☐ 使用正则表达式                                                 │
│                                                                 │
│ ─────────────────────────────────────────────────────────────── │
│                                                                 │
│ 📦 预设过滤器：                                                  │
│ ┌──────────────────────────────────────────────────────────────┐│
│ │ ☐ 🏛️ 政治      过滤政治相关讨论                    [查看词库] ││
│ │ ☐ 💰 加密货币  过滤 Crypto/NFT/Web3 内容            [查看词库] ││
│ │ ☐ ⚽ 体育      过滤体育赛事和讨论                   [查看词库] ││
│ │ ☐ 🤖 AI       过滤 AI/ChatGPT 相关讨论             [查看词库] ││
│ └──────────────────────────────────────────────────────────────┘│
│                                                                 │
│ ─────────────────────────────────────────────────────────────── │
│                                                                 │
│ 已添加的关键词 (5)：                                              │
│ ┌──────────────────────────────────────────────────────────────┐│
│ │ spoiler         永久    时间线, 通知              [×]        ││
│ │ 剧透            永久    时间线                    [×]        ││
│ │ #某活动         7天     时间线, 搜索              [×]        ││
│ │ /广告.*/        永久    时间线       (正则)       [×]        ││
│ └──────────────────────────────────────────────────────────────┘│
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 六、Phase 4: 阅读体验优化

### 6.1 功能概述

改善 Twitter 的阅读体验，特别是长 Thread 和外语内容。

### 6.2 功能需求

#### F4.1 Thread 阅读模式

| 字段 | 内容 |
|------|------|
| **功能 ID** | F4.1 |
| **功能名称** | Thread 阅读模式 |
| **优先级** | P0 |
| **用户故事** | 作为一个用户，我希望能够以文章形式阅读长 Thread，获得更好的阅读体验 |

**功能描述：**

1. 检测 Thread（连续推文串）
2. 提供"阅读模式"按钮
3. 阅读模式界面：
   - 无干扰的文章排版
   - 自动拼接所有推文
   - 保留图片和媒体
   - 可调节字体大小
   - 深色/浅色主题
4. Thread 导出功能

**验收标准：**

- [ ] 正确识别 Thread
- [ ] 阅读模式界面清晰易读
- [ ] 媒体内容正确显示
- [ ] 可以导出为 Markdown/PDF

---

#### F4.2 自动翻译

| 字段 | 内容 |
|------|------|
| **功能 ID** | F4.2 |
| **功能名称** | 自动翻译 |
| **优先级** | P1 |
| **用户故事** | 作为一个用户，我希望能够自动翻译外语推文，无需手动点击 |

**功能描述：**

1. 自动检测推文语言
2. 自动翻译非目标语言的推文
3. 翻译引擎选择：
   - Google 翻译（免费）
   - DeepL（更高质量，需 API Key）
4. 翻译结果内嵌显示
5. 可设置翻译的目标语言
6. 可设置不翻译的语言列表

**技术要点：**

- 使用翻译 API（Google Translate API 或 DeepL API）
- 考虑 API 调用频率和成本
- 缓存翻译结果避免重复请求

**验收标准：**

- [ ] 正确检测推文语言
- [ ] 翻译结果准确显示
- [ ] 支持设置目标语言
- [ ] 翻译结果有缓存

---

#### F4.3 时间线优化

| 字段 | 内容 |
|------|------|
| **功能 ID** | F4.3 |
| **功能名称** | 时间线优化 |
| **优先级** | P2 |
| **用户故事** | 作为一个用户，我希望能够控制时间线的显示方式 |

**功能描述：**

1. 默认使用 Following 时间线
2. 隐藏 "For You" 标签
3. 记住时间线选择，防止 Twitter 重置
4. 可选：隐藏转发、隐藏回复等

**验收标准：**

- [ ] 可以设置默认时间线
- [ ] 刷新后保持设置
- [ ] 可选择隐藏特定类型推文

---

### 6.3 UI 设计要点

```
Thread 阅读模式：

┌─────────────────────────────────────────────────────────────────┐
│                                              [Aa] [🌙] [📤] [×] │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                         @username                               │
│                     关于 XXX 的一些思考                           │
│                       2024-01-15 · 12 条推文                     │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│      这是 Thread 的第一条推文内容。这里是正文，使用更大的           │
│      字体和更好的行距，提供舒适的阅读体验。                         │
│                                                                 │
│      第二条推文的内容会自然接续在这里，无需用户手动                  │
│      点击展开或滚动查找。                                         │
│                                                                 │
│                        [图片内容]                                │
│                                                                 │
│      第三条推文继续...                                            │
│                                                                 │
│  ─────────────────────────────────────────────────────────────  │
│                                                                 │
│      ♡ 1.2K    🔁 456    💬 78                                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 七、Phase 5: 用户备注增强

### 7.1 功能概述

增强现有的用户备注功能，提供更完整的用户管理体验。

### 7.2 功能需求

#### F5.1 备注搜索和筛选

| 字段 | 内容 |
|------|------|
| **功能 ID** | F5.1 |
| **功能名称** | 备注搜索和筛选 |
| **优先级** | P1 |
| **用户故事** | 作为一个用户，我希望能够搜索我添加的备注 |

**功能描述：**

1. 按备注内容搜索
2. 按用户名搜索
3. 按添加日期筛选

**验收标准：**

- [ ] 搜索功能正常工作
- [ ] 支持模糊搜索
- [ ] 搜索结果可点击跳转到用户

---

#### F5.2 备注分组

| 字段 | 内容 |
|------|------|
| **功能 ID** | F5.2 |
| **功能名称** | 备注分组/标签 |
| **优先级** | P2 |
| **用户故事** | 作为一个用户，我希望能够给备注添加分组或标签 |

**功能描述：**

1. 创建自定义分组（如：朋友、同事、行业大V）
2. 给用户分配分组
3. 按分组查看用户列表
4. 分组可设置颜色标识

**验收标准：**

- [ ] 可以创建/编辑/删除分组
- [ ] 可以将用户分配到分组
- [ ] 分组颜色在用户名旁显示

---

#### F5.3 备注导入导出

| 字段 | 内容 |
|------|------|
| **功能 ID** | F5.3 |
| **功能名称** | 备注导入导出 |
| **优先级** | P1 |
| **用户故事** | 作为一个用户，我希望能够备份和恢复我的备注数据 |

**功能描述：**

1. 导出为 JSON 格式
2. 导入 JSON 备份
3. 处理冲突（合并/覆盖选项）

**验收标准：**

- [ ] 导出包含所有备注和分组
- [ ] 导入正确恢复数据
- [ ] 冲突处理逻辑正确

---

#### F5.4 云同步（可选）

| 字段 | 内容 |
|------|------|
| **功能 ID** | F5.4 |
| **功能名称** | 备注云同步 |
| **优先级** | P3 |
| **用户故事** | 作为一个用户，我希望能够在多个设备间同步我的备注 |

**功能描述：**

1. 使用 Chrome Sync Storage 同步
2. 或提供自定义服务器选项
3. 加密存储敏感数据

**验收标准：**

- [ ] 多设备间数据同步
- [ ] 处理同步冲突
- [ ] 数据加密传输

---

## 八、技术债务与优化

### 8.1 需要解决的技术问题

| ID | 问题 | 优先级 | 建议版本 |
|----|------|--------|----------|
| T1 | Twitter API Bearer Token 硬编码，需要建立更新机制 | P1 | v2.0 |
| T2 | IndexedDB 数据迁移机制 | P1 | v2.0 |
| T3 | 内容脚本性能优化（大量 DOM 操作） | P2 | v2.1 |
| T4 | 测试覆盖率提升 | P2 | 持续 |
| T5 | 错误监控和上报机制 | P2 | v2.1 |

### 8.2 架构优化建议

1. **状态管理**: 考虑引入轻量级状态管理（如 Zustand）
2. **API 层**: 抽象 Twitter API 调用，便于维护和测试
3. **组件库**: 继续完善 Shadcn/ui 组件库
4. **国际化**: 确保新功能都支持 i18n

---

## 九、附录

### 9.1 竞品功能对比

| 功能 | 本插件 (计划) | Control Panel | Old Twitter | Better TweetDeck |
|------|--------------|---------------|-------------|------------------|
| 用户备注 | ✅ | ❌ | ❌ | ❌ |
| 视频下载 | ✅ | ❌ | ❌ | ❌ |
| 图片下载 | 🔜 v2.0 | ❌ | ❌ | ❌ |
| 书签管理 | 🔜 v2.1 | ❌ | ❌ | ❌ |
| 广告屏蔽 | 🔜 v2.2 | ✅ | ❌ | ✅ |
| 关键词静音 | 🔜 v2.2 | ✅ | ❌ | ✅ |
| Thread 阅读 | 🔜 v3.0 | ❌ | ❌ | ❌ |
| 翻译 | 🔜 v3.0 | ❌ | ❌ | ❌ |
| 时间线控制 | 🔜 v3.0 | ✅ | ✅ | ✅ |

### 9.2 参考资源

- [Twitter API 文档](https://developer.twitter.com/en/docs)
- [Chrome Extension 开发文档](https://developer.chrome.com/docs/extensions/)
- [Control Panel for Twitter](https://github.com/insin/control-panel-for-twitter) - 竞品参考
- [X Mute Extension](https://mute.deepakness.com/) - 关键词静音参考

### 9.3 术语表

| 术语 | 定义 |
|------|------|
| Thread | 一个用户发布的连续推文串 |
| Timeline | 时间线，用户看到的推文流 |
| Mute | 静音，隐藏特定用户或关键词的内容但不屏蔽 |
| Block | 屏蔽，完全阻止与某用户的互动 |
| Bookmark | 书签，Twitter 的收藏功能 |

---

## 更新日志

| 日期 | 版本 | 更新内容 |
|------|------|----------|
| 2026-01-21 | v1.0 | 初始版本，完成需求规划 |
